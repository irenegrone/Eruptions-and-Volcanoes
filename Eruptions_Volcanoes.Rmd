---
title: "Eruptions and Volcanoes"
author: Irene Grone
output: 
  flexdashboard::flex_dashboard:
    theme: 
      bg: "darkgrey"
      fg: "white"
      primary: "#8AD4C0"
      secondary: "lightblue"
      navbar-bg: "#FFB46E"
    orientation: rows
    vertical_layout: fill
    navbar:
      - { title: "Profile", 
          href: "http://www.linkedin.com/in/irenegrone", 
          align: right, icon: fa-linkedin }
      - { title: "Code", 
          href: "https://github.com/irenegrone", 
          align: right, icon: fa-github }
---

```{r setup, include=FALSE}
library(dplyr)
library(tidyr)
library(stringr)
library(purrr)
library(readxl)
library(magrittr)
library(lubridate)
library(ggplot2)
library(flexdashboard)
library(maps)
library(ggmap)


# File paths
Eruption_FILE_PATH = "data/GVP_Eruption_Results.xlsx"
Holocene_FILE_PATH = "data/GVP_Volcano_List_Holocene.xlsx"
Pleistocene_FILE_PATH = "data/GVP_Volcano_List_Pleistocene.xlsx"
```


Volcanoes Map {data-icon="fa-globe"}
=====================================






Holocene 
=====================================

```{r}
holocene <- read_xlsx(Holocene_FILE_PATH,
                                sheet = "Holocene Volcano List",
                                skip = 1)

names(holocene) <- str_to_lower(gsub(" ", "_", names(holocene)))

holocene <- holocene %>%
  rename_at("elevation_(m)", ~"elevation") %>%
  select(!c(last_known_eruption, activity_evidence)) %>%
  mutate(
    dominant_rock_type = replace_na(dominant_rock_type, "Unknown"),
    tectonic_setting = replace_na(tectonic_setting, "Unknown"),
    primary_volcano_type = gsub("\\(es\\)", "", primary_volcano_type),
    primary_volcano_type = gsub("\\(s\\)", "", primary_volcano_type),
    primary_volcano_type = gsub("\\?", "", primary_volcano_type),
    primary_volcano_type = str_trim(primary_volcano_type),
  )

```


Value Boxes {data-width=200}
-------------------------------------

### Holocene

```{r}
cnt_holo <- length(unique(holocene$volcano_number))

valueBox(cnt_holo, caption = "HOLOCENE VOLCANOES")
```

### primary_volcano_type

```{r}
cnt_type <- length(unique(holocene$primary_volcano_type))

valueBox(cnt_type, caption = "PRIMARY VOLCANO TYPE", color = "#AD80C4")
```


### country

```{r}
cnt_country <- length(unique(holocene$country))

valueBox(cnt_country, caption = "COUNTRIES", color = "#79BEE0")
```


Row {data-height=600, data-width=700}
-----------------------------------------------------------------------

### ELEVATION


> Caption here with the greater sign



### DOMINANT ROCK TYPE
```{r}
# holo_rock <- (holocene$dominant_rock_type))


# color = "#79BEE0")
```
> Caption


Row {data-height=400}
-----------------------------------------------------------------------


### Chart A.2

### Chart A.3

### Description
Some text that explain





Pleistocene
=====================================

```{r}
pleistocene <- read_xlsx(Pleistocene_FILE_PATH,
                         sheet = "Pleistocene Volcano List",
                         skip = 1)[ , c("Volcano Number",
                                        "Volcano Name",
                                        "Country",
                                        "Primary Volcano Type",
                                        "Region",
                                        "Subregion",
                                        "Latitude",
                                        "Longitude",
                                        "Elevation (m)",
                                        "Tectonic Setting")]


names(pleistocene) <- str_to_lower(gsub(" ", "_", names(pleistocene)))


pleistocene <- pleistocene %>%
  rename_at("elevation_(m)", ~"elevation") %>%
  mutate(
    tectonic_setting = replace_na(tectonic_setting, "Unknown"),
    primary_volcano_type = gsub("\\(es\\)", "", primary_volcano_type),
    primary_volcano_type = gsub("\\(s\\)", "", primary_volcano_type),
    primary_volcano_type = gsub("\\(\\?\\)", "", primary_volcano_type),
    primary_volcano_type = gsub("\\?", "", primary_volcano_type),
    primary_volcano_type = str_trim(primary_volcano_type),
  )
```


Value Boxes {data-width=200}
-------------------------------------

### Pleistocene
```{r}
cnt_plei <- length(unique(pleistocene$volcano_number))

valueBox(cnt_plei, caption = "PLEISTOCENE VOLCANOES")
```

### primary_volcano_type

```{r}
cnt_plei_type <- length(unique(pleistocene$primary_volcano_type))

valueBox(cnt_plei_type, caption = "PRIMARY VOLCANO TYPE", color = "#AD80C4")
```


### country

```{r}
cnt_plei_country <- length(unique(pleistocene$country))

valueBox(cnt_plei_country, caption = "COUNTRIES", color = "#79BEE0")
```


Column {data-width=600}
-----------------------------------------------------------------------

### Chart B

```{r}

```

### Chart B.2

### Chart B.3

Column {data-width=600}
-----------------------------------------------------------------------

### Chart B.4



Eruptions
=====================================

### Chart C

```{r}

```





{data-icon="fa-info-circle"}
=====================================

Row
-------------------------------------
Description



Row
-------------------------------------
   
### About {.bg-primary}

This 'card' has a `.bg-primary` class.

Row
-------------------------------------

### Info {.bg-secondary}

This 'card' has a `.bg-secondary` class 



